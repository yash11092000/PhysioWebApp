@{
	Layout = "~/Views/Shared/_AuthLayout.cshtml";
	ViewData["Title"] = "Login";
}

<style>
	body {
		background-color: #F1FAFB; /* soft blue background */
		font-family: 'Poppins', sans-serif;
	}

	.register-card {
		border-radius: 1rem;
		padding: 2rem;
		background-color: #fff;
		box-shadow: 0 0.5rem 1.5rem rgba(0, 119, 182, 0.15);
		border-top: 5px solid #0077B6;
		transition: transform 0.3s ease, box-shadow 0.3s ease;
	}

		.register-card:hover {
			transform: translateY(-5px);
			box-shadow: 0 0.8rem 2rem rgba(0, 119, 182, 0.25);
		}

	.btn-blue {
		background-color: #0077B6;
		color: white;
		font-weight: 500;
		border-radius: 0.5rem;
		transition: all 0.3s ease;
	}

		.btn-blue:hover {
			background-color: #005f94;
			box-shadow: 0 0.4rem 1rem rgba(0, 119, 182, 0.3);
		}

	.form-control:focus,
	.form-select:focus {
		border-color: #0077B6;
		box-shadow: 0 0 0 0.2rem rgba(0, 119, 182, 0.25);
	}

	.link-blue {
		color: #0077B6;
		text-decoration: none;
	}

		.link-blue:hover {
			color: #005f94;
			text-decoration: underline;
		}

	.text-accent {
		color: #0077B6;
	}
</style>


<div class="container d-flex align-items-center justify-content-center min-vh-100">
	<div class="col-md-6 col-lg-5" data-aos="fade-up">
		<div class="register-card">
			<div class="text-center mb-4">
				<i class="bi bi-person-plus-fill fs-1 text-accent"></i>
				<h3 class="fw-bold mt-2 text-accent">Create an Account</h3>
			</div>

			<form id="RegisterForm">
				<div class="mb-3">
					<label for="fullName" class="form-label fw-semibold">Full Name</label>
					<input type="text" class="form-control" id="fullName" name="UserName" required placeholder="John Doe">
				</div>

				<div class="mb-3">
					<label for="role" class="form-label fw-semibold">Register As</label>
					<select class="form-select" id="role" name="UserRole" required>
						<option value="" disabled selected>Select Role</option>
						<option value="user" selected>User</option>
						<option value="therapist">Therapist</option>
					</select>
				</div>

				<div class="mb-3">
					<label for="email" class="form-label fw-semibold">Email Address</label>
					<input type="email" class="form-control" id="email" name="EmailId" required placeholder="you@example.com">
				</div>

				<div class="mb-3">
					<label for="password" class="form-label fw-semibold">Create Password</label>
					<input type="password" class="form-control" id="password" name="Password" required placeholder="••••••••">
				</div>

				<div class="mb-3">
					<label for="confirmPassword" class="form-label fw-semibold">Confirm Password</label>
					<input type="password" class="form-control" id="confirmPassword" name="confirmPassword" required placeholder="••••••••">
				</div>

				<div class="d-grid">
					<button type="button" id="registerBtn" class="btn btn-blue">Register</button>
				</div>
			</form>

			<div class="text-center mt-4">
				<small>
					Already have an account?
					<a href="/Home/Login" class="link-blue fw-bold">Log in</a>
				</small>
			</div>
		</div>
	</div>
</div>
@section scripts {
	<script>
		$('#registerBtn').on('click', function (e) {
						var password = $("#password").val();
						var confirmPassword = $("#confirmPassword").val();
						var EmailId  = $("#email");
						if(EmailId.val() == ""){
							Swal.fire({
								  position: "top-end",
								  icon: "error",
								  title: "Please Enter EmailId",
								  showConfirmButton: false,
								  timer: 1500
								});
						}
						else if(password !== confirmPassword){
									Swal.fire({
								  position: "top-end",
								  icon: "error",
								  title: "Password And Confirm Password Should Match",
								  showConfirmButton: false,
								  timer: 1500
								});
						}
						else{
				e.preventDefault();
				$.ajax({
					url: '/Home/Register',
					type: 'POST',
					data: $("#RegisterForm").serialize(),
					success: function (response) {
							if (response) {
								Swal.fire({
									title: 'Registration Successful!',
									text: 'Your account has been created successfully.',
									icon: 'success',
									confirmButtonText: 'OK'
								}).then(() => {
									window.location.href = '/Home/Login';
								});
							} else {
								Swal.fire({
									title: 'Error',
									text: response.message || 'Something went wrong. Please try again.',
									icon: 'error',
									confirmButtonText: 'OK'
								});
					}
					},
					error: function (xhr) {
						Swal.fire({
									title: 'Error',
									text: response.message || 'Something went wrong. Please try again.',
									icon: 'error',
									confirmButtonText: 'OK'
								});
					}
				});
					}
			});

	</script>
}